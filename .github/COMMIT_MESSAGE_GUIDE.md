# Commit Message Guidelines

This project follows the [Conventional Commits](https://www.conventionalcommits.org/) specification for consistent, readable commit messages.

## Format

```
<type>(scope): <description>

[optional body]

[optional footer]
```

## Commit Types

| Type | Purpose | Example |
|------|---------|---------|
| `feat` | New features | `feat(cli): add configuration validation` |
| `fix` | Bug fixes | `fix(routing): resolve null pointer exception` |
| `docs` | Documentation changes | `docs: update installation guide` |
| `style` | Code style changes | `style(core): fix indentation and formatting` |
| `refactor` | Code refactoring | `refactor(spectrum): simplify allocation logic` |
| `perf` | Performance improvements | `perf(core): optimize request processing by 15%` |
| `test` | Adding/updating tests | `test(routing): add unit tests for k-shortest path` |
| `chore` | Maintenance tasks | `chore: update dependencies` |
| `build` | Build system changes | `build: update webpack configuration` |
| `ci` | CI/CD changes | `ci: add automated testing workflow` |

## Rules

### DO
- **Start with letter** after colon (upper/lowercase both OK): `feat(cli): add new feature` or `feat(api): API integration`
- **Be descriptive**: What you changed and why
- **Keep subject line ≤100 characters total**
- **Use imperative mood**: "add" not "added" or "adds"
- **Include scope** when possible: `feat(config): ...`

### DON'T
- Start with numbers or symbols after colon: ~~`feat(cli): 3 new features`~~
- Add trailing period: ~~`feat(cli): add new feature.`~~
- Be too vague: ~~`fix bug`~~ or ~~`update code`~~
- Exceed 100 characters in subject line (entire line)
- Use past tense: ~~`fixed bug`~~ (use `fix bug`)

### Special Case: Merge Commits
Merge commits generated by Git are automatically valid and don't need to follow conventional commit format:
- `Merge branch 'feature/awesome' into main`
- `Merge pull request #123 from user/branch`
- `Merge remote-tracking branch 'origin/main'`

## Writing Great Commit Messages

### Focus on WHAT and WHY, not HOW

**Good Examples:**
```
feat(auth): add JWT token authentication
fix(db): resolve connection timeout during peak load
perf(core): cache frequently accessed configuration data
refactor(cli): extract argument validation into separate module
refactor(gui): CLI integration for entry point
docs: add troubleshooting guide for common installation issues
```

**Bad Examples:**
```
Fixed bug                    # Too vague
Update README.md             # What specifically was updated?
feat: fix                    # Contradictory type and description
Added some changes           # Not descriptive
WIP: working on feature      # Not a complete change
```

## FUSION-Specific Scopes

Use these scopes to match the project architecture:

- `cli` - Command-line interface (`fusion/cli/`)
- `config` - Configuration system (`fusion/configs/`)
- `core` - Simulation core (`fusion/core/`)
- `routing` - Routing algorithms (`fusion/modules/routing/`)
- `spectrum` - Spectrum assignment (`fusion/modules/spectrum/`)
- `snr` - SNR calculations (`fusion/modules/snr/`)
- `rl` - Reinforcement learning (`fusion/modules/rl/`)
- `ml` - Machine learning (`fusion/modules/ml/`)
- `viz` - Visualization (`fusion/visualization/`)
- `gui` - GUI interface (`fusion/gui/`)
- `unity` - HPC integration (`fusion/unity/`)
- `test` - Testing framework (`tests/`)

## Examples for Common Scenarios

### New Features
```
feat(cli): add support for custom configuration templates
feat(routing): implement congestion-aware path selection
feat(viz): add real-time performance monitoring dashboard
```

### Bug Fixes
```
fix(spectrum): resolve allocation conflict in multi-core scenarios
fix(config): handle missing configuration file gracefully
fix(rl): correct reward calculation in training episodes
```

### Performance Improvements
```
perf(core): reduce simulation startup time by 40%
perf(routing): optimize k-shortest path algorithm
perf(snr): cache SNR calculations for repeated requests
```

### Refactoring
```
refactor(cli): simplify argument parsing with registry pattern
refactor(core): extract metrics calculation into separate module
refactor(config): migrate from INI to YAML configuration format
```

### Documentation
```
docs: add comprehensive API reference
docs(config): update configuration examples with new templates
docs: fix typos in installation guide
```

### With Detailed Bodies (Recommended for Complex Changes)
```
feat(config): add schema-based validation system

Implement comprehensive configuration validation using JSON Schema
to catch errors early and provide helpful error messages. This
addresses the frequent user confusion around invalid config files.

Changes include:
- Add schema definitions for all config sections
- Implement validation in ConfigManager class
- Add detailed error messages with suggestions
- Update CLI to show validation errors clearly

Resolves #123, #145, #167
```

```
fix(routing): resolve memory leak in k-shortest path algorithm

The previous implementation had a memory leak when processing large
topologies due to unclosed graph resources. This fix ensures proper
resource cleanup and reduces memory usage by 60% for large networks.

- Add proper resource disposal in PathCalculator
- Implement connection pooling for graph operations
- Add memory usage tests to prevent regression

Fixes #234
```

## Testing Your Commit Messages

Before committing, test your message format:

```bash
# Subject line validation (detailed body is allowed below):
^(feat|fix|docs|style|refactor|perf|test|chore|build|ci)(\(.+\))?: [a-z].{4,}[^.]$
# Total subject line length: ≤100 characters
```

## Why These Standards?

1. **Consistency**: All commits follow the same format
2. **Automation**: Tools can parse commit types for changelogs
3. **Clarity**: Clear what changed and where
4. **History**: Easy to understand project evolution
5. **Reviews**: Faster PR reviews with structured information

---

**Remember**: Great commit messages help future you and your teammates understand the codebase evolution!
