# ============================================================================
# Example 2: Geographic Failure with 1+1 Protection
# ============================================================================
# This configuration tests geographic disaster scenarios with 1+1 disjoint
# path protection enabled. Useful for testing network survivability under
# regional failures.

[general_settings]
erlang_start = 100
erlang_stop = 300
erlang_step = 100
max_iters = 5
num_requests = 2000
holding_time = 3.0
thread_num = s1
seed = 42

# Modulation and bandwidth
mod_assumption = DEFAULT
mod_assumption_path = data/json_input/example_mods/default_mod_formats.json
request_distribution = {"25": 0.10, "50": 0.10, "100": 0.50, "200": 0.20, "400": 0.10}

# Simulation control
thread_erlangs = False
dynamic_lps = False
fixed_grid = False
pre_calc_mod_selection = False
max_segments = 4

# Routing/spectrum (also in sections below)
route_method = k_shortest_path
allocation_method = first_fit
k_paths = 4
guard_slots = 1

# Monitoring
save_snapshots = False
snapshot_step = 10
print_step = 15
save_step = 10
save_start_end_slots = False
spectrum_priority = None

# Logging
verbose_logging = False
log_level = WARNING

[topology_settings]
network = NSFNet
cores_per_link = 7
bw_per_slot = 12.5
const_link_weight = False
is_only_core_node = True
multi_fiber = False

[spectrum_settings]
c_band = 320
guard_slots = 1
allocation_method = first_fit

[file_settings]
file_type = json

[ml_settings]
deploy_model = False

[rl_settings]
obs_space = obs_3
n_trials = 1
device = cpu
optimize_hyperparameters = False
optuna_trials = 1
is_training = False
path_algorithm = dqn
path_model = None
core_algorithm = first_fit
core_model = None
spectrum_algorithm = first_fit
spectrum_model = None
render_mode = None
super_channel_space = 3
alpha_start = 0.000215
alpha_end = 0.000215
alpha_update = linear_decay
gamma = 0.1
epsilon_start = 0.01
epsilon_end = 0.01
epsilon_update = exp_decay
path_levels = 2
decay_rate = 0.4
feature_extractor = path_gnn
gnn_type = graph_conv
layers = 2
emb_dim = 64
heads = 4
conf_param = 2
cong_cutoff = 0.9
reward = 1
penalty = -10
dynamic_reward = False
core_beta = 0.1

[routing_settings]
route_method = k_shortest_path
k_paths = 4
path_ordering = hops
precompute_paths = true

[failure_settings]
# Geographic failure (F4) - simulates disaster scenario
failure_type = geo
geo_center_node = 5
geo_hop_radius = 2

# Failure timing
t_fail_arrival_index = -1  # Midpoint
t_repair_after_arrivals = 1000

[protection_settings]
# Enable 1+1 disjoint path protection
protection_mode = 1plus1

# Protection timing parameters
protection_switchover_ms = 50.0    # Fast switchover
restoration_latency_ms = 100.0     # Re-routing latency

# Revert to primary path after repair
revert_to_primary = true

[offline_rl_settings]
# Use 1+1 protection policy
policy_type = one_plus_one
fallback_policy = ksp_ff
device = cpu

[dataset_logging]
log_offline_dataset = false

[recovery_timing]
protection_switchover_ms = 50.0
restoration_latency_ms = 100.0
failure_window_size = 1000

[reporting]
export_csv = true
csv_output_path = results/geo_failure_protection.csv

[snr_settings]
snr_type = None
input_power = 0.001
egn_model = False
beta = 0.5
theta = 0.0
xt_type = without_length
xt_noise = False
requested_xt = {"QPSK": -26.19, "16-QAM": -36.69, "64-QAM": -41.69}
phi = {"QPSK": 1, "16-QAM": 0.68, "64-QAM": 0.6190476190476191}
