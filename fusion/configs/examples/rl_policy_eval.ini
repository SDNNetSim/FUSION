# ============================================================================
# Example 3: RL Policy Evaluation with Behavior Cloning
# ============================================================================
# This configuration evaluates an offline RL policy (Behavior Cloning) under
# SRLG failure conditions. Demonstrates action masking and fallback handling.

[general_settings]
erlang_start = 100
erlang_stop = 300
erlang_step = 100
max_iters = 5
num_requests = 2000
holding_time = 3.0
thread_num = s1
seed = 42

[topology_settings]
network = NSFNet
cores_per_link = 7
bw_per_slot = 12.5

[spectrum_settings]
c_band = 320
guard_slots = 1
allocation_method = first_fit

[routing_settings]
route_method = k_shortest_path
k_paths = 4
path_ordering = hops
precompute_paths = true

[failure_settings]
# SRLG failure (F3) - multiple links sharing common risk
failure_type = srlg

# Define SRLG: links that share a conduit
srlg_links = [(0,1), (1,2), (2,3)]

# Failure timing
t_fail_arrival_index = -1  # Midpoint
t_repair_after_arrivals = 1000

[protection_settings]
# No protection - test policy's ability to handle failures
protection_mode = none

[offline_rl_settings]
# Behavior Cloning (BC) policy
policy_type = bc
bc_model_path = models/bc_model.pt

# Fallback to KSP-FF when all actions masked
fallback_policy = ksp_ff

# Use GPU if available
device = cpu  # Change to 'cuda' or 'mps' if GPU available

[dataset_logging]
# Enable dataset logging for further training
log_offline_dataset = true
dataset_output_path = datasets/bc_evaluation.jsonl

# Epsilon-mix for exploration
epsilon_mix = 0.1

[recovery_timing]
protection_switchover_ms = 50.0
restoration_latency_ms = 100.0
failure_window_size = 1000

[reporting]
export_csv = true
csv_output_path = results/rl_policy_eval.csv

# Multi-seed aggregation for statistical significance
aggregate_seeds = true
seed_list = [42, 43, 44, 45, 46]

[snr_settings]
snr_type = None
