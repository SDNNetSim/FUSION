# =============================================================================
# FUSION Runtime Configuration Template
# =============================================================================
# Purpose: Configuration for runtime/dynamic simulation scenarios
# Use Case: Multi-process simulations with different k_paths per process
# =============================================================================

[general_settings]
# -----------------------------------------------------------------------------
# Core Simulation Parameters
# -----------------------------------------------------------------------------
# holding_time: Average connection duration in time units (float, >= 0)
holding_time = 0.2
# mod_assumption: Modulation format assumption mode (string: "DEFAULT", "CUSTOM")
mod_assumption = DEFAULT
# mod_assumption_path: Path to modulation formats JSON file (string, relative path)
mod_assumption_path = data/json_input/example_mods/default_mod_formats.json

# -----------------------------------------------------------------------------
# Traffic Load Parameters
# -----------------------------------------------------------------------------
# erlang_start: Starting traffic load in Erlangs (float, >= 0)
erlang_start = 300
# erlang_stop: Ending traffic load in Erlangs (float, >= erlang_start)
erlang_stop = 500
# erlang_step: Increment between traffic loads (float, > 0)
erlang_step = 100

# -----------------------------------------------------------------------------
# Simulation Control
# -----------------------------------------------------------------------------
# max_iters: Number of iterations per Erlang load point (int, >= 1)
max_iters = 2
# guard_slots: Guard band slots between adjacent connections (int, >= 0)
guard_slots = 1
# max_segments: Maximum number of segments for spectrum assignment (int, >= 1)
max_segments = 1
# thread_erlangs: Enable per-process Erlang load distribution (bool)
thread_erlangs = False
# dynamic_lps: Enable dynamic lightpath sizing (bool)
dynamic_lps = False
# fixed_grid: Use fixed grid instead of flex grid (bool)
fixed_grid = False
# pre_calc_mod_selection: Pre-calculate modulation selection (bool)
pre_calc_mod_selection = False
# spectrum_priority: Spectrum allocation priority mode (string or None)
spectrum_priority = None

# -----------------------------------------------------------------------------
# Request Generation
# -----------------------------------------------------------------------------
# num_requests: Number of connection requests per iteration (int, >= 1)
num_requests = 500
# request_distribution: Bandwidth request distribution as JSON (string)
#   Format: {"bandwidth_gbps": probability} where probabilities sum to 1.0
request_distribution = {"25": 0.10, "50": 0.10, "100": 0.50, "200": 0.20, "400": 0.10}
# allocation_method: Spectrum allocation algorithm (string: "first_fit", "best_fit")
allocation_method = first_fit
# route_method: Routing algorithm (string: "k_shortest_path", "xt_aware", etc.)
route_method = k_shortest_path

# -----------------------------------------------------------------------------
# Output and Monitoring
# -----------------------------------------------------------------------------
# save_snapshots: Save network state snapshots during simulation (bool)
save_snapshots = False
# snapshot_step: Interval between snapshots in requests (int, >= 1)
snapshot_step = 10
# print_step: Interval between console progress updates (int, >= 1)
print_step = 15
# save_step: Interval between data saves in requests (int, >= 1)
save_step = 10
# save_start_end_slots: Save start/end slot indices for connections (bool)
save_start_end_slots = False

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# verbose_logging: Enable detailed logging output (bool)
verbose_logging = False
# log_level: Logging verbosity level (string: "DEBUG", "INFO", "WARNING", "ERROR")
log_level = WARNING

# -----------------------------------------------------------------------------
# Advanced Features (Required)
# -----------------------------------------------------------------------------
# is_grooming_enabled: Enable traffic grooming (bool)
is_grooming_enabled = False
# can_partially_serve: Allow partial bandwidth allocation (bool)
can_partially_serve = False
# transponder_usage_per_node: Track transponder usage per node (bool)
transponder_usage_per_node = False
# blocking_type_ci: Use confidence interval for blocking calculations (bool)
blocking_type_ci = False

[topology_settings]
# -----------------------------------------------------------------------------
# Network Topology Configuration
# -----------------------------------------------------------------------------
# network: Network topology name (string: "NSFNet", "COST239", "USbackbone60", etc.)
network = NSFNet
# bw_per_slot: Bandwidth per frequency slot in GHz (float, > 0)
bw_per_slot = 12.5
# cores_per_link: Number of fiber cores per physical link (int, >= 1)
cores_per_link = 3
# const_link_weight: Use constant link weights instead of distance (bool)
const_link_weight = False
# is_only_core_node: Restrict traffic to core nodes only (bool)
is_only_core_node = True
# multi_fiber: Enable multiple fibers per link (bool)
multi_fiber = False

[routing_settings]
# -----------------------------------------------------------------------------
# Routing Configuration
# -----------------------------------------------------------------------------
# k_paths: Number of candidate paths for k-shortest path routing (int, >= 1)
k_paths = 4

[spectrum_settings]
# -----------------------------------------------------------------------------
# Spectrum Management
# -----------------------------------------------------------------------------
# c_band: Number of frequency slots in C-band (int, >= 1)
c_band = 320

[snr_settings]
# -----------------------------------------------------------------------------
# Signal-to-Noise Ratio Configuration
# -----------------------------------------------------------------------------
# snr_type: SNR calculation type (string or None: "xt_calculation", None)
snr_type = None
# xt_type: Cross-talk calculation type (string: "with_length", "without_length")
xt_type = without_length
# beta: Beta parameter for SNR calculation (float)
beta = 0.5
# theta: Theta parameter for SNR calculation (float)
theta = 0.0
# input_power: Input signal power in Watts (float, > 0)
input_power = 0.001
# egn_model: Enable EGN (Enhanced Gaussian Noise) model (bool)
egn_model = False
# phi: Modulation format efficiency factors (JSON string)
phi = {"QPSK": 1, "16-QAM": 0.68, "64-QAM": 0.6190476190476191}
# bi_directional: Enable bi-directional transmission (bool)
bi_directional = True
# xt_noise: Include cross-talk in noise calculation (bool)
xt_noise = False
# requested_xt: Required cross-talk thresholds per modulation format (JSON string)
requested_xt = {"QPSK": -26.19, "16-QAM": -36.69, "64-QAM": -41.69}
# snr_recheck: Re-check SNR after allocation (bool)
snr_recheck = False
# recheck_adjacent_cores: Re-check adjacent cores for cross-talk (bool)
recheck_adjacent_cores = False
# recheck_crossband: Re-check cross-band interference (bool)
recheck_crossband = False

[rl_settings]
# -----------------------------------------------------------------------------
# Reinforcement Learning Configuration (LEGACY - being phased out by policy_settings)
# -----------------------------------------------------------------------------
# obs_space: Observation space type (string: "obs_1", "obs_2", "obs_3")
obs_space = obs_3
# n_trials: Number of RL training trials (int, >= 1)
n_trials = 1
# device: Compute device for RL (string: "cpu", "cuda", "mps")
device = cpu
# optimize_hyperparameters: Enable Optuna hyperparameter optimization (bool)
optimize_hyperparameters = False
# optuna_trials: Number of Optuna optimization trials (int, >= 1)
optuna_trials = 1
# is_training: Enable RL training mode (bool)
is_training = True
# path_algorithm: Path selection algorithm (string: "dqn", "first_fit", etc.)
path_algorithm = epsilon_greedy_bandit
# path_model: Path to trained path selection model (string or None)
path_model = None
# core_algorithm: Core selection algorithm (string: "first_fit", etc.)
core_algorithm = first_fit
# core_model: Path to trained core selection model (string or None)
core_model = None
# spectrum_algorithm: Spectrum allocation algorithm (string: "first_fit", etc.)
spectrum_algorithm = first_fit
# spectrum_model: Path to trained spectrum model (string or None)
spectrum_model = None
# render_mode: Environment rendering mode (string or None)
render_mode = None
# super_channel_space: Super channel space size (int, >= 1)
super_channel_space = 3
# alpha_start: Initial learning rate (float, > 0)
alpha_start = 0.000215
# alpha_end: Final learning rate (float, > 0)
alpha_end = 0.000215
# alpha_update: Learning rate update strategy (string: "linear_decay", "exp_decay")
alpha_update = linear_decay
# gamma: Discount factor for future rewards (float, 0.0-1.0)
gamma = 0.1
# epsilon_start: Initial exploration rate (float, 0.0-1.0)
epsilon_start = 0.01
# epsilon_end: Final exploration rate (float, 0.0-1.0)
epsilon_end = 0.01
# epsilon_update: Exploration rate update strategy (string: "exp_decay", "linear_decay")
epsilon_update = exp_decay
# path_levels: Number of path decision levels (int, >= 1)
path_levels = 2
# decay_rate: Rate of epsilon/alpha decay (float, > 0)
decay_rate = 0.4
# feature_extractor: Feature extraction method (string: "path_gnn", "mlp")
feature_extractor = path_gnn
# gnn_type: Graph neural network type (string: "graph_conv", "gat")
gnn_type = graph_conv
# layers: Number of neural network layers (int, >= 1)
layers = 2
# emb_dim: Embedding dimension size (int, >= 1)
emb_dim = 64
# heads: Number of attention heads for GAT (int, >= 1)
heads = 4
# conf_param: Confidence parameter for decisions (int)
conf_param = 2
# cong_cutoff: Congestion threshold cutoff (float, 0.0-1.0)
cong_cutoff = 0.9
# reward: Reward value for successful allocation (int)
reward = 1
# penalty: Penalty value for failed allocation (int, typically negative)
penalty = -10
# dynamic_reward: Enable dynamic reward calculation (bool)
dynamic_reward = False
# core_beta: Beta parameter for core selection (float)
core_beta = 0.1

[ml_settings]
# -----------------------------------------------------------------------------
# Machine Learning Configuration (LEGACY - being phased out)
# -----------------------------------------------------------------------------
# deploy_model: Enable ML model for routing decisions (bool)
deploy_model = False
# output_train_data: Output training data for ML models (bool)
output_train_data = False
# ml_training: Enable ML model training mode (bool)
ml_training = False
# ml_model: ML model type (string or None: "decision_tree", "random_forest", None)
ml_model = None
# train_file_path: Path to training data file (string or None)
train_file_path = None
# test_size: Fraction of data used for testing (float, 0.0-1.0)
test_size = 0.3

[file_settings]
# -----------------------------------------------------------------------------
# Output File Configuration
# -----------------------------------------------------------------------------
# file_type: Output file format (string: "json", "csv")
file_type = json

# =============================================================================
# Multi-Process Override Section
# =============================================================================
# This section demonstrates process-specific configuration overrides.
# When running with multiple processes, each can have different settings.
[s2]
# k_paths: Override k_paths for process s2 (int, >= 1)
k_paths = 3
