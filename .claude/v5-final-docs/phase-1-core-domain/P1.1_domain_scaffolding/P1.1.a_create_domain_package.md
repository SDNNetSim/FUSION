# Task ID: P1.1.a - Create Domain Package

**Sub-phase**: P1.1 Domain Scaffolding
**Scope**: Phase 1 - Core Domain Model only
**Task type**: refactor-plan

---

## Purpose

Create the `fusion/domain/` package skeleton that will house all domain model classes for the v5 refactor.

---

## Context to load before running this task

- `.claude/v5-final-docs/phase-1-core-domain/README.md` (Phase 1 constraints)
- `fusion/core/__init__.py` (example of existing package structure)

---

## Outputs

### 1. Create `fusion/domain/__init__.py`

```python
"""
FUSION Domain Model Package.

This package contains the typed domain objects for FUSION v5:
- SimulationConfig: Immutable simulation configuration
- Request: Network service request with lifecycle tracking
- Lightpath: Allocated optical path with capacity management
- Result objects: Immutable pipeline stage outputs

All domain objects support legacy conversion via from_legacy_dict/to_legacy_dict.
"""

from fusion.domain.config import SimulationConfig

__all__ = [
    "SimulationConfig",
]
```

**Notes**:
- Start with only `SimulationConfig` exported
- Other classes will be added in subsequent sub-phases
- Use explicit `__all__` to define public API

### 2. Create `fusion/domain/config.py` (stub)

```python
"""
SimulationConfig - Immutable simulation configuration.

This module defines the SimulationConfig frozen dataclass that replaces
the legacy engine_props dictionary with a typed, immutable structure.
"""

from __future__ import annotations

from dataclasses import dataclass, field
from typing import Any


@dataclass(frozen=True)
class SimulationConfig:
    """
    Immutable simulation configuration.

    This dataclass captures all simulation parameters in a typed,
    frozen structure. Once created, the configuration cannot be modified.

    Use from_engine_props() to create from legacy engine_props dict.
    Use to_engine_props() to convert back for legacy compatibility.
    """

    # Placeholder - full implementation in P1.1.b
    pass
```

### 3. Create `fusion/tests/domain/__init__.py`

```python
"""Tests for fusion.domain package."""
```

### 4. Create `fusion/tests/domain/test_config.py` (stub)

```python
"""Tests for SimulationConfig."""

import pytest

from fusion.domain.config import SimulationConfig


class TestSimulationConfig:
    """Test suite for SimulationConfig dataclass."""

    # Placeholder - full implementation in P1.1.d
    pass
```

---

## Directory Structure After Task

```
fusion/
├── domain/
│   ├── __init__.py         # Package with SimulationConfig export
│   └── config.py           # SimulationConfig stub
└── tests/
    └── domain/
        ├── __init__.py
        └── test_config.py  # Test stub
```

---

## Verification Commands

```bash
# Verify package is importable
python -c "from fusion.domain import SimulationConfig; print('OK')"

# Verify tests are discoverable
pytest fusion/tests/domain/test_config.py --collect-only

# Verify linting passes
ruff check fusion/domain/
ruff format --check fusion/domain/
```

---

## Next Task

Proceed to [P1.1.b_design_simulation_config.md](P1.1.b_design_simulation_config.md) to define the full SimulationConfig dataclass.
